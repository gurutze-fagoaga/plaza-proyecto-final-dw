<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Home</title>
    <link rel="stylesheet"
        href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@20..48,100..700,0..1,-50..200" />
    <link rel="stylesheet" href="./css/reset.css">
    <link rel="stylesheet" href="./css/index.css">

</head>

<body class="Body">

    <!-- HEADER -->

    <header class="Header">
        <nav class="Header-nav">
            <a href="./index.html"><img class="Header-logo" src="./img/logo-plaza.svg" alt="Logo La Plaza"></a>
            <ul class="Menu">
                <li class="Menu-item"><a class="Menu-link Menu-link--Talleres" href="./talleres.html">Talleres</a></l>
                <li class="Menu-item"><a class="Menu-link Menu-link--espacio" href="./espacio.html">Espacio creativo</a>
                </li>
                <li class="Menu-item"><a class="Menu-link Menu-link--monthly" href="./monthly.html">Monthly</a></li>
                <li class="Menu-item"><a class="Menu-link Menu-link--contacto" href="#">Contacto</a></li>
            </ul>
        </nav>


    </header>



    <!-- CONTENIDO DE MI HOME -->

    <main class="Main">

        <!-- PIZARRA -->


        <section id="Principal" class="Principal">
            <h1 class="Principal-h1">
                La Plaza donde la creatividad se encuentra y crece.
            </h1>

            <p class="Principal-txt">Para empezar te proponemos crear tu nuevo fondo de
                pantalla.
                <button id="Principal-btn" class="Principal-btn">Crear</button>
            </p>


        </section>


        <div id="Board" class="Board u-displayNone">

            <div class="Controllers">


                <button id="BtnCuadricula" class="Controllers-btn">
                    <img id="IconoCuadricula" class="u-displayNone" src="./img/icono-cuadricula.svg"
                        alt="Icono cuadrícula">
                    <img id="IconoCuadricula" src="./img/icono-liso.svg" alt="Icono sin cuadrícula">


                </button>
                <button id="BtnPurple" class="Controllers-btn Controllers-btnColor Controllers-btn--purple"></button>
                <button id="BtnYellow" class="Controllers-btn Controllers-btnColor Controllers-btn--yellow"></button>
                <button id="BtnBlue" class="Controllers-btn Controllers-btnColor Controllers-btn--blue"></button>
                <button id="BtnGreen" class="Controllers-btn Controllers-btnColor Controllers-btn--green"></button>
                <button id="BtnBorrar" class="Controllers-btn "> <img src="./img/icono-borrar.svg"
                        alt="Icono borrar"></button>
                <button id="BtnDescargar" class="Controllers-btn"><img src="./img/icono-descargar.svg"
                        alt="Icono descargar"></button>


            </div>
            <div class="Controllers">
                <button id="BtnCerrar" class="Controllers-btn"><span class="material-symbols-outlined">
                        close
                    </span>
                </button>
            </div>
            <div class="CanvasContainer">

                <canvas id="Canvas" class="Canvas">

                </canvas>

            </div>

        </div>

        <!--SOBRE EL PROYECTO-->

        <section class="About">
            <div class="About-item">
                <h3 class="About-question">+ ¿Qué es "La Plaza"? </h3>
                <div class="About-content">
                    <p>
                        La Plaza es un espacio creativo situado en Pamplona, diseñado para inspirar y conectar a
                        personas apasionadas por diversas formas de arte y expresión.
                    </p>
                </div>
            </div>

            <div class="About-item">
                <h3 class="About-question">+ ¿Qué hacemos?</h3>
                <div class="About-content">
                    <p>
                        En este lugar, la creatividad fluye libremente a través de talleres semanales, nuestros eventos
                        mensuales (Monthly) y el área de coworking, diseñado para que los creativos de la zona tengan un
                        espacio para desarrollar sus proyectos.
                    </p>
                </div>
            </div>

            <div class="About-item">
                <h3 class="About-question">+ ¿Quiénes somos?</h3>
                <div class="About-content">
                    <p>
                        Somos un grupo de jóvenes con inquietudes artísticas, que se han visto con dificultades para
                        encontrar entornos creativos en su día a día. Con el proyecto pretendemos que otras personas
                        tengan facilidades para llevar a cabo sus proyectos creativos.
                    </p>
                </div>
            </div>

            <div class="About-item">
                <h3 class="About-question">+ Me interesa el proyecto. ¿Cómo puedo apoyarlo?</h3>
                <div class="About-content">
                    <p>
                        Hay muchas formas de apoyar "La Plaza":
                    <ul>
                        <li>Participar en los talleres y eventos que organizamos.</li>
                        <li>¿Tienes un conociemiento que quieras compartir? Estaremos encantadas en atender tu
                            sugerencia.</li>
                    </ul>
                    </p>
                </div>

            </div>
        </section>

        <!--GALERIA-->
        <section class="Galeria">
            <h2 class="Galeria-title"> This is La Plaza</h2>
            <div class="Galeria-content">
                <img class="Galeria-img" src="./img/galeria-2.jpg" alt="">
                <img class="Galeria-img" src="./img/galeria-3.jpeg" alt="">
                <img class="Galeria-img" src="./img/galeria-4.jpg" alt="">
                <img class="Galeria-img" src="./img/galeria-5.jpg" alt="">
            </div>
            <a href=""></a>
        </section>
    </main>

    <!-- FOOTER -->

    <footer class="Footer">

        <form action="get" class="Footer-formulario"></form>

    </footer>


    <script>

        // ACORDEON en ABOUT

        const listaItems = document.querySelectorAll('.About-item');
        listaItems.forEach(item => {
            item.addEventListener("click", () => {
                listaItems.forEach(item => item.classList.remove("open"));
                item.classList.toggle("open");
            });

        });


        // JS para PIZARRA

        // Variables y constantes

        const inicio = document.querySelector("#Principal");
        const btnCrear = document.querySelector("#Principal-btn");

        const board = document.querySelector("#Board");
        const listaBotonesDibujo = board.querySelectorAll(".Controllers-btnColor");

        const btnCuadricula = board.querySelector("#BtnCuadricula");
        const listaIconosCuadricula = board.querySelectorAll("#IconoCuadricula");
        const btnPurple = board.querySelector("#BtnPurple");
        const btnYellow = board.querySelector("#BtnYellow");
        const btnBlue = board.querySelector("#BtnBlue");
        const btnGreen = board.querySelector("#BtnGreen");
        const btnBorrar = board.querySelector("#BtnBorrar");
        const btnDescargar = board.querySelector("#BtnDescargar");
        const btnCerrar = board.querySelector("#BtnCerrar");


        // abrir y cerrar la pizarra

        btnCrear.addEventListener("click", () => {
            inicio.style.display = "none";
            board.classList.toggle("u-displayNone");

        })

        btnCerrar.addEventListener("click", () => {
            inicio.style.display = "block";
            board.classList.toggle("u-displayNone");

        })

        // función para activar los botones de colores

        btnPurple.classList.add("BtnActive");
        listaBotonesDibujo.forEach(boton => {
            boton.addEventListener("click", () => {
                listaBotonesDibujo.forEach(boton => {
                    boton.classList.remove("BtnActive");
                })
                boton.classList.toggle("BtnActive");
            })
        });


        // funciones de los botones

        btnCuadricula.addEventListener("click", () => {
            listaIconosCuadricula.forEach(icono => {
                icono.classList.toggle("u-displayNone");

            })
            board.classList.toggle("CuadriculaActiva");
        })







        // CANVAS:

        //Guardar el elemento y el contexto
        const canvas = document.querySelector("#Canvas");
        const context = canvas.getContext("2d");

     

        let color = "#874aaf";

        let initialX;
        let initialY;
        let correccionX = 0;
        let correccionY = 0;

        let posicion = canvas.getBoundingClientRect();
        correccionX = posicion.x;
        correccionY = posicion.y;

        function resizeCanvas() {
            canvas.width = canvas.clientWidth;  // Establece el ancho real
            canvas.height = canvas.clientHeight; // Establece la altura real
        }

        window.addEventListener('resize', resizeCanvas);
        resizeCanvas(); // Llama a esta función para ajustar al cargar

        // cambio la variable color:

        
        btnPurple.addEventListener("click", () => {
            color = "#874aaf";
        })
        btnYellow.addEventListener("click", () => {
            color = "#f0ff53";
        })
        btnBlue.addEventListener("click", () => {
            color = "#5b93bc";
        })
        btnGreen.addEventListener("click", () => {
            color = "#006d53";
        })

        // funcion de dibujar

        const dibujar = (cursorX, cursorY) => {
            context.beginPath();
            context.moveTo(initialX, initialY);
            context.lineWidth = 10;
            context.strokeStyle = color;
            context.lineCap = "round";
            context.lineJoin = "round";
            context.lineTo(cursorX, cursorY);
            context.stroke();

            initialX = cursorX;
            initialY = cursorY;

        };

        const mouseDown = (evt) => {
            evt.preventDefault();
            if (evt.changedTouches === undefined) {
                initialX = evt.offsetX;
                initialY = evt.offsetY;
            } else {
                //evita desfase al dibujar
                initialX = evt.changedTouches[0].pageX - correccionX;
                initialY = evt.changedTouches[0].pageY - correccionY;
            }
            dibujar(initialX, initialY);
            canvas.addEventListener("mousemove", mouseMoving);
            canvas.addEventListener('touchmove', mouseMoving);
        };

        const mouseMoving = (evt) => {
            evt.preventDefault();
            if (evt.changedTouches === undefined) {
                dibujar(evt.offsetX, evt.offsetY);
            } else {
                dibujar(evt.changedTouches[0].pageX - correccionX, evt.changedTouches[0].pageY - correccionY);
            }
        };

        const mouseUp = () => {
            canvas.removeEventListener("mousemove", mouseMoving);
            canvas.removeEventListener("touchmove", mouseMoving);
        };

        canvas.addEventListener("mousedown", mouseDown);
        canvas.addEventListener("mouseup", mouseUp);

        //pantallas tactiles
        canvas.addEventListener('touchstart', mouseDown);
        canvas.addEventListener('touchend', mouseUp);


    </script>
</body>

</html>